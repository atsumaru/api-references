{"path":"apis/nicoad","templateID":1,"sharedPropsHashes":{"apiList":"ZkxYww"},"localProps":{"reference":{"title":"ニコニ広告情報取得","slug":"apis/nicoad","description":"「ニコニ広告情報取得」のAPIでの利用方法","order":11,"navi":"APIでの利用方法","experimental":true,"contents":"<h2 id=\"-\">目次</h2>\n<ul>\n<li><a href=\"#%E3%83%8B%E3%82%B3%E3%83%8B%E5%BA%83%E5%91%8A%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E5%8F%96%E5%BE%97\">ニコニ広告ポイント取得</a></li>\n<li><a href=\"#%E3%83%8B%E3%82%B3%E3%83%8B%E5%BA%83%E5%91%8A%E5%B1%A5%E6%AD%B4%E5%8F%96%E5%BE%97\">ニコニ広告履歴取得</a></li>\n<li><a href=\"#%E3%83%8B%E3%82%B3%E3%83%8B%E5%BA%83%E5%91%8A%E8%B2%A2%E7%8C%AE%E5%BA%A6%E3%83%A9%E3%83%B3%E3%82%AD%E3%83%B3%E3%82%B0%E5%8F%96%E5%BE%97\">ニコニ広告貢献度ランキング取得</a></li>\n</ul>\n<h2 id=\"api-\">APIでの利用方法</h2>\n<h3 id=\"-\">ニコニ広告ポイント取得</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.nicoad.getPoints()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このゲームに対して、合計何ポイント広告されたかを取得できます</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;NicoadPoints&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"-nicoadpoints-\">戻り値の型 NicoadPoints について</h4>\n<p>戻り値で取得できる <code>NicoadPoints</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface NicoadPoints {\n    activePoint: number;\n    totalPoint: number;\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">activePoint</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">アクティブポイント：<a href=\"https://qa.nicovideo.jp/faq/show/9770\">広告期間</a>以内の広告の合計ポイント</td>\n</tr>\n<tr>\n<td align=\"left\">totalPoint</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">トータルポイント：広告期間が終了したものも含めたすべての広告の合計ポイント</td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<p>戻り値で取得できる <code>NicoadPoints</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.nicoad.getPoints().then(function(v) { console.log(v) }) を実行\n{\n    activePoint: 3000,\n    totalPoint: 10000\n}\n\n#### 起こりうるエラーの種類\n\n名前|説明\n:---|:---\n[INTERNAL_SERVER_ERROR](/common/errors)|RPGアツマールもしくはニコニ広告のサービス側で何らかの問題が発生しているか、または通信に失敗した（※ユーザーが広告ブロックしている場合も含む）\n[API_CALL_LIMIT_EXCEEDED](/common/errors) |短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている\n\n### ニコニ広告履歴取得\n\nメソッド |`window.RPGAtsumaru.experimental.nicoad.getHistories()`\n:---|:---\n説明|このゲームに対してのニコニ広告の履歴を、最新のものから順に最大30件まで取得します\n引数|なし &lt;!-- `offsetAdId` : この引数に広告ID(nicoadId)を指定すると、最新からではなく指定したIDの次の広告から順に最大30件まで取得します --&gt;\n戻り値|`Promise&lt;NicoadHistories&gt;`\n制限|このAPIは[APIの呼び出し回数制限](/common/rate-limit)の対象です\n\n#### 戻り値の型 NicoadHistories について\n戻り値で取得できる `NicoadHistories` は以下のような型です。\n\n```js\nnterface NicoadHistories {\n    activePoint: number;\n    remainingCount: number;\n    serverTime: number;\n    histories: {\n        advertiserName: string;\n        nicoadId: number;\n        adPoint: number;\n        contribution: number;\n        startedAt: number;\n        endedAt: number;\n    }[];\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">remainingCount</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">今回取得した広告履歴の他に、あと何件広告されたか</td>\n</tr>\n<tr>\n<td align=\"left\">serverTime</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">サーバー時刻</td>\n</tr>\n<tr>\n<td align=\"left\">histories</td>\n<td align=\"left\"><code>array</code></td>\n<td align=\"left\">広告履歴</td>\n</tr>\n<tr>\n<td align=\"left\">histories.length</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">今回取得した広告履歴の件数</td>\n</tr>\n<tr>\n<td align=\"left\">histories[n].advertiserName</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目の広告の広告者名</td>\n</tr>\n<tr>\n<td align=\"left\">histories[n].nicoadId</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目の広告の広告ID</td>\n</tr>\n<tr>\n<td align=\"left\">histories[n].adPoint</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目の広告のポイント</td>\n</tr>\n<tr>\n<td align=\"left\">histories[n].contribution</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目の広告の貢献度</td>\n</tr>\n<tr>\n<td align=\"left\">histories[n].startedAt</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目の広告の掲載開始時間</td>\n</tr>\n<tr>\n<td align=\"left\">histories[n].endedAt</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目の広告の掲載終了時間</td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<p>戻り値で取得できる <code>NicoadPoints</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.nicoad.getHistories().then(function(v) { console.log(v) }) を実行\n{\n    remainingCount: 0,\n    serverTime: 1534570000,\n    histories: [\n        {\n        advertiserName: &quot;アツマライオン&quot;,\n        nicoadId: 1234567,\n        adPoint: 1000,\n        contribution: 3000,\n        startedAt: 1534567890,\n        endedAt: 1534654290,\n    },\n    {\n        advertiserName: &quot;RPGアツマール開発チーム&quot;,\n        nicoadId: 1234560,\n        adPoint: 10000,\n        contribution: 30000,\n        startedAt: 1534517890,\n        endedAt: 1534604290,\n    }\n    ]\n}</code></pre>\n<h4 id=\"-\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールもしくはニコニ広告のサービス側で何らかの問題が発生しているか、または通信に失敗した（※ユーザーが広告ブロックしている場合も含む）</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"-\">ニコニ広告貢献度ランキング取得</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.nicoad.getRanking()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このゲームに対してのニコニ広告の貢献度ランキングを、最大30位まで取得します</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;NicoadRanking&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"-nicoadranking-\">戻り値の型 NicoadRanking について</h4>\n<p>戻り値で取得できる <code>NicoadRanking</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">type NicoadRanking = {\n    advertiserName: string;\n    totalContribution: number;\n    rank: number;\n    }[]</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">(this)</td>\n<td align=\"left\"><code>array</code></td>\n<td align=\"left\">広告貢献度ランキング</td>\n</tr>\n<tr>\n<td align=\"left\">length</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">広告貢献度ランキングの件数（※同着の場合両方含まれるため、31件以上の可能性あり）</td>\n</tr>\n<tr>\n<td align=\"left\">[n].advertiserName</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のランキングの広告者名</td>\n</tr>\n<tr>\n<td align=\"left\">[n].totalContribution</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目のランキングの貢献度</td>\n</tr>\n<tr>\n<td align=\"left\">[n].rank</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目のランキングの順位</td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<p>戻り値で取得できる <code>NicoadPoints</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.nicoad.getRanking().then(function(v) { console.log(v) }) を実行\n[\n        {\n        advertiserName: &quot;RPGアツマール開発チーム&quot;,\n        totalContribution: 30000,\n        rank: 1\n        },\n        {\n        advertiserName: &quot;アツマライオン&quot;,\n        totalContribution: 3000,\n        rank: 2\n    }\n]</code></pre>\n<h4 id=\"-\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールもしくはニコニ広告のサービス側で何らかの問題が発生しているか、または通信に失敗した（※ユーザーが広告ブロックしている場合も含む）</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h2 id=\"-\">関連ドキュメント</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ドキュメント</th>\n<th align=\"left\">リンク</th>\n<th align=\"left\">備考</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">機能解説</td>\n<td align=\"left\"><a href=\"/nicoad\">ニコニ広告情報取得</a></td>\n<td align=\"left\">機能概要や全般的な解説</td>\n</tr>\n<tr>\n<td align=\"left\">プラグインでの利用方法</td>\n<td align=\"left\"><a href=\"/plugins/nicoad\">ニコニ広告情報取得</a></td>\n<td align=\"left\">RPGツクールMVユーザー向け</td>\n</tr>\n</tbody></table>\n<h2 id=\"-\">最終更新日</h2>\n<ul>\n<li>2020/02/28</li>\n</ul>\n"},"title":"ニコニ広告情報取得","path":"/apis/nicoad"}}
