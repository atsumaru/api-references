{"path":"apis/user","templateID":1,"sharedPropsHashes":{"apiList":"ZkxYww"},"localProps":{"reference":{"title":"ユーザー情報取得","slug":"apis/user","description":"「ユーザー情報取得」のAPIでの利用方法","order":12,"navi":"APIでの利用方法","experimental":true,"contents":"<h2 id=\"-\">目次</h2>\n<ul>\n<li><a href=\"#%E3%83%97%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC%E8%87%AA%E8%BA%AB%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97\">プレイヤー自身のユーザー情報を取得</a></li>\n<li><a href=\"#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BCID%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97\">ユーザーIDを指定して特定のユーザー情報を取得</a></li>\n<li><a href=\"#%E7%8F%BE%E5%9C%A8%E3%81%AE%E3%82%B2%E3%83%BC%E3%83%A0%E3%82%92%E6%9C%80%E8%BF%91%E3%83%97%E3%83%AC%E3%82%A4%E3%81%97%E3%81%9F%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97\">現在のゲームを最近プレイしたユーザーの情報を取得</a></li>\n<li><a href=\"#%E3%82%AA%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E4%BA%BA%E6%95%B0%E3%82%92%E5%8F%96%E5%BE%97\">オンライン人数を取得</a></li>\n</ul>\n<h2 id=\"api-\">APIでの利用方法</h2>\n<h3 id=\"-\">プレイヤー自身のユーザー情報を取得</h3>\n<ul>\n<li>現在のユーザーの情報を取得します。</li>\n<li>ユーザーがプレミアム会員かどうかも取得できます。</li>\n<li>プレイしているユーザーが<a href=\"/common/login\">ログイン</a>している必要があります。ログインしてない場合にエラーを返すため、それでユーザーのログイン状態を判別することができます。</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getSelfInformation()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;SelfInformation&gt;</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"-selfinformation-\">戻り値の型 SelfInformation について</h4>\n<p>戻り値で取得できる <code>SelfInformation</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface SelfInformation {\n    id: number;\n    name: string;\n    isPremium: boolean;\n    profile: string;\n    twitterId: string;\n    url: string;\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">ユーザーのニコニコユーザーID</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーの名前</td>\n</tr>\n<tr>\n<td align=\"left\">isPremium</td>\n<td align=\"left\"><code>boolean</code></td>\n<td align=\"left\">ユーザーがニコニコのプレミアム会員かどうか</td>\n</tr>\n<tr>\n<td align=\"left\">profile</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーのプロフィール文</td>\n</tr>\n<tr>\n<td align=\"left\">twitterId</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーのtwitterId</td>\n</tr>\n<tr>\n<td align=\"left\">url</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーのサイトURL</td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.user.getSelfInformation().then(function(v) { console.log(v) }) を実行\n{\n    id: 64341294,\n    name: &quot;RPGアツマール公式&quot;,\n    profile: &quot;やあ！ 僕はアツマライオン！\\nみんなでゲームを作って遊んで楽しもうよ！&quot;,\n    twitterId: &quot;nico_indiesgame&quot;,\n    url: &quot;https://game.nicovideo.jp/atsumaru/&quot;,\n    isPremium: false\n}</code></pre>\n<h4 id=\"-\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">UNAUTHORIZED</a></td>\n<td align=\"left\">プレイヤーがログインしていない</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールもしくはニコニ広告のサービス側で何らかの問題が発生しているか、または通信に失敗した（※ユーザーが広告ブロックしている場合も含む）</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"-id-\">ユーザーIDを指定して特定のユーザー情報を取得</h3>\n<ul>\n<li>引数でユーザーIDを指定し、指定したユーザーの情報を取得します。</li>\n<li>指定したIDのユーザーが<a href=\"/common/interplayer\">プレイヤー間通信の有効化</a>をしている必要があります。</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getUserInformation(userId: number)</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\"><code>userId</code> : ユーザー情報を取得したいユーザーのニコニコユーザーIDを自然数で指定します。</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし <!-- `offsetAdId` : この引数に広告ID(nicoadId)を指定すると、最新からではなく指定したIDの次の広告から順に最大30件まで取得します --></td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;UserInformation&gt;</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"-userinformation-\">戻り値の型 UserInformation について</h4>\n<p>戻り値で取得できる <code>UserInformation</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface UserInformation {\n    id: number;\n    name: string;\n    profile: string;\n    twitterId: string;\n    url: string;\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">ユーザーのニコニコユーザーID</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーの名前</td>\n</tr>\n<tr>\n<td align=\"left\">profile</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーのプロフィール文</td>\n</tr>\n<tr>\n<td align=\"left\">twitterId</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーのtwitterId</td>\n</tr>\n<tr>\n<td align=\"left\">url</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーのサイトURL</td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.user.getUserInformation(64341294).then(function(v) { console.log(v) }) を実行\n{\n    id: 64341294,\n    name: &quot;RPGアツマール公式&quot;,\n    profile: &quot;やあ！ 僕はアツマライオン！\\nみんなでゲームを作って遊んで楽しもうよ！&quot;,\n    twitterId: &quot;nico_indiesgame&quot;,\n    url: &quot;https://game.nicovideo.jp/atsumaru/&quot;\n}</code></pre>\n<h4 id=\"-\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">FORBIDDEN</a></td>\n<td align=\"left\"><code>userId</code> に<a href=\"/common/interplayer\">プレイヤー間通信の有効化</a>を行っていないユーザーのIDを指定した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">BAD_REQUEST</a></td>\n<td align=\"left\">引数として不正な値を指定している</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"-\">現在のゲームを最近プレイしたユーザーの情報を取得</h3>\n<ul>\n<li><a href=\"/common/interplayer\">プレイヤー間通信の有効化</a>をしているユーザーを、最近現在のゲームをプレイした順番に取得します。</li>\n<li>このAPIで取得できるユーザーは、 <a href=\"/common/interplayer\">プレイヤー間通信の有効化</a> を有効化しているユーザーのみです。</li>\n<li>ゲーム内で有効に使うために、まずゲーム内で有効化APIを呼び出すようにすると良いでしょう。</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getRecentUsers()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;UserIdName[]&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"-useridname-\">戻り値の型 UserIdName について</h4>\n<p>戻り値で取得できる <code>UserIdName</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface UserIdName {\n    id: number;\n    name: string;\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">ユーザーのニコニコユーザーID</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ユーザーの名前</td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.user.getRecentUsers().then(function(v) { console.log(v) }) を実行\n[\n        {\n        id: 64341294,\n        name: &quot;RPGアツマール公式&quot;\n        },\n        {\n        id: 63008093,\n        name: &quot;ツクール開発部公式&quot;\n    }\n]</code></pre>\n<h4 id=\"-\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールもしくはニコニ広告のサービス側で何らかの問題が発生しているか、または通信に失敗した（※ユーザーが広告ブロックしている場合も含む）</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"-\">オンライン人数を取得</h3>\n<ul>\n<li>今から1～60分前までの間にこのゲームをプレイしたログインユーザーの人数を取得します。</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getActiveUserCount(minutes: number)</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">引数</td>\n<td align=\"left\"><code>minutes</code> : 現在から何分前までのプレイ人数を取得するかを1～60までの整数で指定します。</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;number&gt;</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"-\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.experimental.user.getActiveUserCount(1).then(function(v) { console.log(v) }) を実行\n3</code></pre>\n<h4 id=\"-\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">BAD_REQUEST</a></td>\n<td align=\"left\"><code>minutes</code> に1～60までの整数以外を指定した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールもしくはニコニ広告のサービス側で何らかの問題が発生しているか、または通信に失敗した（※ユーザーが広告ブロックしている場合も含む）</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h2 id=\"-\">関連ドキュメント</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ドキュメント</th>\n<th align=\"left\">リンク</th>\n<th align=\"left\">備考</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">機能解説</td>\n<td align=\"left\"><a href=\"/user\">ユーザー情報取得</a></td>\n<td align=\"left\">機能概要や全般的な解説</td>\n</tr>\n<tr>\n<td align=\"left\">プラグインでの利用方法</td>\n<td align=\"left\"><a href=\"/plugins/user\">ユーザー情報取得</a></td>\n<td align=\"left\">RPGツクールMVユーザー向け</td>\n</tr>\n</tbody></table>\n<h2 id=\"-\">最終更新日</h2>\n<ul>\n<li>2020/02/28</li>\n</ul>\n"},"title":"ユーザー情報取得","path":"/apis/user"}}
