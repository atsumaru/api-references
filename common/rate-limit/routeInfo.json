{"path":"common/rate-limit","templateID":1,"sharedPropsHashes":{"apiList":"Z1R9RQi"},"localProps":{"reference":{"title":"APIの呼び出し回数制限","slug":"common/rate-limit","description":"RPGアツマールのAPIの呼び出し回数の制限について","order":2,"navi":"共通事項","experimental":null,"contents":"<h2 id=\"呼び出し回数制限とは\">呼び出し回数制限とは</h2>\n<p>一部のRPGアツマールのAPIには、RPGアツマールのサーバー負荷を抑える目的で <strong>呼び出し回数制限</strong> という仕組みが実装されています。</p>\n<p>以下で述べる制限対象のAPIについて、1分間にAPIを呼び出せる回数が決まっており、決められた回数を超えた場合はエラーになります。</p>\n<p>呼び出せる回数は、だいたい1プレイヤーあたり <strong>5秒に1回程度</strong> を目安にしてください。</p>\n<p>この制限は、APIごとではなくプレイヤーに対して制限対象のAPI全体に定められています。例えば、あるゲームでプレイヤーが「シグナルAPI」を使いすぎて呼び出し回数制限状態になった場合、そのプレイヤーは他の「ユーザー情報取得API」なども利用できなくなります。ただし、対象外のAPIは制限状態でも通常通り利用が可能ですし、他のプレイヤーはこの影響を受けません。</p>\n<p>制限の条件自体は、上記の <strong>5秒に1回程度</strong> よりも緩めに設定されているため、多少オーバーしても即座に制限されることはありませんが、ご注意ください。</p>\n<h3 id=\"制限された場合\">制限された場合</h3>\n<p>呼び出し回数制限状態になったとき、対象のAPIは必ず <strong><a href=\"/common/error\">API_CALL_LIMIT_EXCEEDED</a></strong> エラーを返します。</p>\n<h3 id=\"制限の解除\">制限の解除</h3>\n<p>呼び出し回数制限は、直近1分間の呼び出し回数をもとに制限しているため、最長でも <strong>1分</strong> 待てば呼び出し回数はリセットされ、再びAPI呼び出しをできるようになります。</p>\n<h2 id=\"呼び出し回数制限の対象\">呼び出し回数制限の対象</h2>\n<ul>\n<li><a href=\"/interplayer\">プレイヤー間通信の有効化</a></li>\n<li><a href=\"/scoreboard\">スコアボード</a></li>\n<li><a href=\"/user\">ユーザー情報取得</a></li>\n<li><a href=\"/global-server-variable\">グローバルサーバー変数</a></li>\n<li><a href=\"/shared-save\">共有セーブ</a></li>\n<li><a href=\"/signal\">シグナル</a></li>\n</ul>\n<h2 id=\"api制限されないためには\">API制限されないためには</h2>\n<p>「API呼び出し回数制限対象」のAPIを呼び出す場合は、以下のことに気をつけましょう。</p>\n<ul>\n<li>利用するAPIが、呼び出し回数制限の対象に当たるか <strong>事前に確認</strong> しましょう。</li>\n<li>対象のAPIを利用する際は、 <strong>多くても5秒に1回程度</strong> を目安にAPIを利用しましょう。</li>\n<li>もちろん、より少ないに越したことはありません。</li>\n<li>データの取得系APIでは、頻繁に取得しても結果はあまり変わりません。以前取得したデータを上手く使いまわし、呼び出し回数を減らしましょう。</li>\n<li>失敗しては困る場合は <strong>エラーハンドリング</strong> をしましょう。</li>\n<li>プレイヤーの行動に依存してAPIを呼び出す場合、ゲームで呼び出し回数をハンドリングしきれない可能性はあります。呼び出しが制限によって失敗しても問題ないようなゲーム構成にするか、きちんとリカバリーできるようにエラーのハンドリングを行いましょう。</li>\n<li>エラーについては <a href=\"/common/error\">こちら</a> も合わせてご覧ください。</li>\n</ul>\n<h2 id=\"最終更新日\">最終更新日</h2>\n<ul>\n<li>2020/09/15</li>\n</ul>\n"},"title":"APIの呼び出し回数制限","path":"/common/rate-limit"}}
